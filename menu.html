<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>KRAVIN DELIVERY</title>

Â  <!-- Snipcart CSS & JS -->
Â  <link
Â  Â  href="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.css"
Â  Â  rel="stylesheet"
Â  />
Â  <script
Â  Â  async
Â  Â  src="https://cdn.snipcart.com/themes/v3.3.0/default/snipcart.js"
Â  ></script>

Â  <div
Â  Â  hidden
Â  Â  id="snipcart"
Â  Â  data-api-key="NDZmZGQyMjMtMmRhOS00NGYxLWE3ZDMtMjE3Y2I2OTUzMzIyNjM4ODUyOTYxNjA3OTk3Mzky"
Â  Â  data-currency="jmd"
Â  ></div>

Â  <!-- Firebase -->
Â  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
Â  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>

Â  <style>
Â  Â  * {
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }

Â  Â  body {
Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  background: #f7f7f7;
Â  Â  Â  padding-top: 80px;
Â  Â  }

Â  Â  .top-bar {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  right: 0;
Â  Â  Â  height: 50px;
Â  Â  Â  background-color: red;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  justify-content: center;
Â  Â  Â  z-index: 999;
Â  Â  }

Â  Â  .top-bar h1 {
Â  Â  Â  color: white;
Â  Â  Â  font-size: 20px;
Â  Â  }

Â  Â  .menu-icon {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0;
Â  Â  Â  left: 0;
Â  Â  Â  font-size: 28px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  background: white;
Â  Â  Â  padding: 8px 12px;
Â  Â  Â  z-index: 1001;
Â  Â  Â  height: 50px;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .cart-icon {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 0;
Â  Â  Â  right: 0;
Â  Â  Â  font-size: 28px;
Â  Â  Â  background: white;
Â  Â  Â  padding: 8px 12px;
Â  Â  Â  z-index: 1001;
Â  Â  Â  height: 50px;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  }

Â  Â  .dropdown {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 50px;
Â  Â  Â  left: 0;
Â  Â  Â  width: 250px;
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  Â  border-right: 1px solid #ccc;
Â  Â  Â  padding: 10px;
Â  Â  Â  display: none;
Â  Â  Â  z-index: 1000;
Â  Â  Â  height: calc(100vh - 50px);
Â  Â  Â  overflow-y: auto;
Â  Â  }

Â  Â  .dropdown a {
Â  Â  Â  display: block;
Â  Â  Â  padding: 8px;
Â  Â  Â  font-weight: bold;
Â  Â  Â  color: #333;
Â  Â  Â  text-decoration: none;
Â  Â  }

Â  Â  .dropdown a:hover {
Â  Â  Â  background: #eee;
Â  Â  }

Â  Â  .user-info {
Â  Â  Â  text-align: center;
Â  Â  Â  margin-bottom: 12px;
Â  Â  Â  padding-bottom: 10px;
Â  Â  Â  border-bottom: 1px solid #ccc;
Â  Â  }

Â  Â  .user-info img {
Â  Â  Â  width: 60px;
Â  Â  Â  border-radius: 50%;
Â  Â  Â  margin-bottom: 8px;
Â  Â  }

Â  Â  .user-info p {
Â  Â  Â  font-size: 14px;
Â  Â  Â  color: #444;
Â  Â  Â  margin: 2px 0;
Â  Â  }

Â  Â  #product-list {
Â  Â  Â  display: grid;
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
Â  Â  Â  gap: 16px;
Â  Â  Â  padding: 10px;
Â  Â  }

Â  Â  .product {
Â  Â  Â  background: white;
Â  Â  Â  padding: 12px;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  .product img {
Â  Â  Â  max-width: 100%;
Â  Â  Â  height: auto;
Â  Â  Â  border-radius: 8px;
Â  Â  }

Â  Â  .product h3 {
Â  Â  Â  margin: 10px 0 5px;
Â  Â  }

Â  Â  .product p {
Â  Â  Â  margin: 4px 0;
Â  Â  }

Â  Â  .snipcart-add-item {
Â  Â  Â  background-color: #ff6600;
Â  Â  Â  color: white;
Â  Â  Â  padding: 8px 16px;
Â  Â  Â  border: none;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  margin-top: 8px;
Â  Â  }

Â  Â  .snipcart-add-item:hover {
Â  Â  Â  background-color: #e65c00;
Â  Â  }

Â  Â  .logout-btn {
Â  Â  Â  background-color: red;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 6px 12px;
Â  Â  Â  border-radius: 5px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  margin-top: 10px;
Â  Â  }

Â  Â  .logout-btn:hover {
Â  Â  Â  background-color: darkred;
Â  Â  }
Â  </style>
</head>
<body>
Â  <!-- Menu Icon -->
Â  <div class="menu-icon" onclick="toggleMenu()">â˜°</div>

Â  <!-- Cart Icon -->
Â  <div class="cart-icon">
Â  Â  <button
Â  Â  Â  class="snipcart-checkout"
Â  Â  Â  style="background: none; border: none; font-size: 24px; cursor: pointer;"
Â  Â  >
Â  Â  Â  ğŸ›’
Â  Â  </button>
Â  </div>

Â  <!-- Top Bar -->
Â  <div class="top-bar"><h1>KRAVIN DELIVERY</h1></div>

Â  <!-- Dropdown Menu -->
Â  <div class="dropdown" id="menu-dropdown">
Â  Â  <div class="user-info" id="user-profile">Loading profile...</div>
Â  Â  <a href="#" onclick="loadMenu('KFC')">KFC</a>
Â  Â  <a href="#" onclick="loadMenu('LasVagas')">Las Vagas</a>
Â  Â  <a href="#" onclick="loadMenu('Cloggys')">Cloggys</a>
Â  Â  <a href="#" onclick="loadMenu('Waterloo')">Waterloo Guesthouse</a>
Â  Â  <a href="#" onclick="loadMenu('Tastees')">Tastees</a>
Â  </div>

Â  <!-- Product Grid -->
Â  <div id="product-list">Loading menu...</div>

Â  <script>
Â  Â  // Firebase config
Â  Â  const firebaseConfig = {
Â  Â  Â  apiKey: "AIzaSyD5ZcQCWIMFo8u9SI-Svg5DoJESpcGz2jQ",
Â  Â  Â  authDomain: "kravin-delivery-login.firebaseapp.com",
Â  Â  Â  projectId: "kravin-delivery-login",
Â  Â  Â  storageBucket: "kravin-delivery-login.appspot.com",
Â  Â  Â  messagingSenderId: "1035748923136",
Â  Â  Â  appId: "1:1035748923136:web:bf68e1434d7bae3a7385e5",
Â  Â  };

Â  Â  firebase.initializeApp(firebaseConfig);

Â  Â  // Show profile + logout
Â  Â  firebase.auth().onAuthStateChanged((user) => {
Â  Â  Â  const profile = document.getElementById("user-profile");
Â  Â  Â  if (user) {
Â  Â  Â  Â  const name = user.displayName || user.email.split("@")[0];
Â  Â  Â  Â  const email = user.email;
Â  Â  Â  Â  const date = new Date(user.metadata.creationTime).toLocaleDateString();
Â  Â  Â  Â  const avatar = `https://ui-avatars.com/api/?name=${encodeURIComponent(
Â  Â  Â  Â  Â  name
Â  Â  Â  Â  )}&background=random`;

Â  Â  Â  Â  profile.innerHTML = `
Â  Â  Â  Â  Â  <img src="${avatar}" alt="avatar" />
Â  Â  Â  Â  Â  <p><strong>${name}</strong></p>
Â  Â  Â  Â  Â  <p>${email}</p>
Â  Â  Â  Â  Â  <p>Joined: ${date}</p>
Â  Â  Â  Â  Â  <button class="logout-btn" onclick="logout()">ğŸšª Logout</button>
Â  Â  Â  Â  `;
Â  Â  Â  } else {
Â  Â  Â  Â  profile.innerHTML = "<p style='color:red;'>Not logged in</p>";
Â  Â  Â  }
Â  Â  });

Â  Â  function logout() {
Â  Â  Â  firebase
Â  Â  Â  Â  .auth()
Â  Â  Â  Â  .signOut()
Â  Â  Â  Â  .then(() => {
Â  Â  Â  Â  Â  window.location.href = "login.html";
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  alert("Logout failed: " + error.message);
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // Toggle Menu
Â  Â  function toggleMenu() {
Â  Â  Â  const dropdown = document.getElementById("menu-dropdown");
Â  Â  Â  dropdown.style.display =
Â  Â  Â  Â  dropdown.style.display === "block" ? "none" : "block";
Â  Â  }

Â  Â  // Google Sheets setup (replace YOUR_SHEET_ID_X with actual IDs)
Â  Â  const sheets = {
Â  Â  Â  KFC: "1PDF8T0lX7yGDxxbZMu1JuMQrhBVputNSkFdzMSYnxIA",
Â  Â  Â  LasVagas: "YOUR_SHEET_ID_2",
Â  Â  Â  Cloggys: "YOUR_SHEET_ID_3",
Â  Â  Â  Waterloo: "YOUR_SHEET_ID_4",
Â  Â  Â  Tastees: "YOUR_SHEET_ID_5",
Â  Â  };
Â  Â  const sheetName = "Sheet1";

Â  Â  function loadMenu(restaurant) {
Â  Â  Â  const sheetId = sheets[restaurant];
Â  Â  Â  const sheetUrl = `https://opensheet.elk.sh/${sheetId}/${sheetName}`;
Â  Â  Â  const container = document.getElementById("product-list");
Â  Â  Â  container.innerHTML = "Loading menu...";

Â  Â  Â  fetch(sheetUrl)
Â  Â  Â  Â  .then((res) => res.json())
Â  Â  Â  Â  .then((data) => {
Â  Â  Â  Â  Â  container.innerHTML = "";
Â  Â  Â  Â  Â  data.forEach((item) => {
Â  Â  Â  Â  Â  Â  const product = document.createElement("div");
Â  Â  Â  Â  Â  Â  product.className = "product";
Â  Â  Â  Â  Â  Â  product.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  <img src="${item.Image}" alt="${item.Name}" />
Â  Â  Â  Â  Â  Â  Â  <h3>${item.Name}</h3>
Â  Â  Â  Â  Â  Â  Â  <p><strong>${item.Price}</strong></p>
Â  Â  Â  Â  Â  Â  Â  <button class="snipcart-add-item"
Â  Â  Â  Â  Â  Â  Â  Â  data-item-id="${item.Name}"
Â  Â  Â  Â  Â  Â  Â  Â  data-item-name="${item.Name}"
Â  Â  Â  Â  Â  Â  Â  Â  data-item-price="${item.Price.replace(/[^0-9.]/g, '')}"
Â  Â  Â  Â  Â  Â  Â  Â  data-item-url="https://webvtec.github.io/Kravin-delivery-website/menu.html"
Â  Â  Â  Â  Â  Â  Â  Â  data-item-image="${item.Image}">
Â  Â  Â  Â  Â  Â  Â  Â  Add to Cart
Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  container.appendChild(product);
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch(() => {
Â  Â  Â  Â  Â  container.innerHTML = `<p style="color:red; text-align:center;">âŒ Failed to load menu for ${restaurant}.</p>`;
Â  Â  Â  Â  });

Â  Â  Â  // Hide menu after selection
Â  Â  Â  document.getElementById("menu-dropdown").style.display = "none";
Â  Â  }

Â  Â  // Delivery locations and fees
Â  Â  const deliveryLocations = {
Â  Â  Â  brompton: { label: "Brompton lane ($2,000)", fee: 2000 },
Â  Â  Â  blackriver: { label: "Black River Square ($1,500)", fee: 1500 },
Â  Â  Â  luana: { label: "Luana ($2,300)", fee: 2300 },
Â  Â  Â  sandyground: { label: "Sandy Ground ($2,000)", fee: 2000 },
Â  Â  };

Â  Â  // When Snipcart is ready, setup custom fields and events
Â  Â  document.addEventListener("snipcart.ready", () => {
Â  Â  Â  // Register delivery location dropdown
Â  Â  Â  Snipcart.api.fields.registerCustomField({
Â  Â  Â  Â  id: "delivery-location",
Â  Â  Â  Â  name: "Delivery Location",
Â  Â  Â  Â  type: "select",
Â  Â  Â  Â  options: Object.entries(deliveryLocations).map(([key, loc]) => ({
Â  Â  Â  Â  Â  value: key,
Â  Â  Â  Â  Â  label: loc.label,
Â  Â  Â  Â  })),
Â  Â  Â  Â  required: true,
Â  Â  Â  });

Â  Â  Â  const deliveryFeeItemId = "delivery-fee";

Â  Â  Â  // Update delivery fee in cart when custom field changes
Â  Â  Â  Snipcart.events.on("cart.changed", () => {
Â  Â  Â  Â  const cart = Snipcart.api.cart.get();
Â  Â  Â  Â  const customField = cart.customFields.find(
Â  Â  Â  Â  Â  (f) => f.name === "Delivery Location"
Â  Â  Â  Â  );
Â  Â  Â  Â  const selectedLocation = customField ? customField.value : null;
Â  Â  Â  Â  const fee =
Â  Â  Â  Â  Â  selectedLocation && deliveryLocations[selectedLocation]
Â  Â  Â  Â  Â  Â  ? deliveryLocations[selectedLocation].fee
Â  Â  Â  Â  Â  Â  : 0;

Â  Â  Â  Â  // Remove existing delivery fee item if present
Â  Â  Â  Â  const existingFeeItem = cart.items.find(
Â  Â  Â  Â  Â  (i) => i.id === deliveryFeeItemId
Â  Â  Â  Â  );
Â  Â  Â  Â  if (existingFeeItem) {
Â  Â  Â  Â  Â  Snipcart.api.cart.items.remove(existingFeeItem.id);
Â  Â  Â  Â  }

Â  Â  Â  Â  // Add delivery fee item if fee > 0
Â  Â  Â  Â  if (fee > 0) {
Â  Â  Â  Â  Â  Snipcart.api.cart.items.add({
Â  Â  Â  Â  Â  Â  id: deliveryFeeItemId,
Â  Â  Â  Â  Â  Â  name: "Delivery Fee",
Â  Â  Â  Â  Â  Â  price: fee,
Â  Â  Â  Â  Â  Â  quantity: 1,
Â  Â  Â  Â  Â  Â  url: window.location.href,
Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  });

Â  Â  Â  // Send order details to WhatsApp after checkout
Â  Â  Â  Snipcart.events.on("order.completed", (order) => {
Â  Â  Â  Â  const name = order.billingAddressName || "Customer";
Â  Â  Â  Â  const phone = order.billingAddressPhone || "";
Â  Â  Â  Â  const address = order.billingAddress1 || "";
Â  Â  Â  Â  const items = order.items
Â  Â  Â  Â  Â  .map((item) => `${item.name} x${item.quantity}`)
Â  Â  Â  Â  Â  .join(", ");
Â  Â  Â  Â  const total = order.total.toFixed(2);

Â  Â  Â  Â  const message = `New Order:
Name: ${name}
Phone: ${phone}
Address: ${address}
Items: ${items}
Total: $${total}`;

Â  Â  Â  Â  const encodedMsg = encodeURIComponent(message);
Â  Â  Â  Â  const whatsappNumber = "18763422293"; // Your WhatsApp number without spaces/dashes
Â  Â  Â  Â  window.open(`https://wa.me/${whatsappNumber}?text=${encodedMsg}`, "_blank");
Â  Â  Â  });
Â  Â  });

Â  Â  // Load default menu on page load
Â  Â  window.onload = () => loadMenu("KFC");
Â  </script>
</body>
</html>
